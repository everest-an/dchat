# DChat 测试检查清单

本文档提供完整的功能测试检查清单,用于验证 DChat 应用的所有功能。

**测试环境**: https://dchat.pro  
**测试网络**: Sepolia 测试网  
**测试日期**: 2025-10-30

---

## 🔧 测试前准备

### 必需工具
- [ ] Chrome/Firefox/Brave 浏览器
- [ ] MetaMask 钱包扩展已安装
- [ ] MetaMask 已配置 Sepolia 测试网
- [ ] 钱包中有测试 ETH (至少 0.1 ETH)

### 获取测试 ETH
1. 访问 https://sepoliafaucet.com/
2. 输入钱包地址
3. 完成验证并获取测试 ETH
4. 等待 1-2 分钟到账

---

## 1️⃣ 基础功能测试

### 1.1 页面加载
- [ ] 访问 https://dchat.pro
- [ ] 页面正常加载,无白屏
- [ ] 页面响应速度 < 3秒
- [ ] 无 JavaScript 错误(检查控制台)

### 1.2 响应式设计
- [ ] 桌面端显示正常 (1920x1080)
- [ ] 平板端显示正常 (768x1024)
- [ ] 移动端显示正常 (375x667)
- [ ] 不同分辨率下布局适配正常

---

## 2️⃣ Web3 连接测试

### 2.1 钱包连接
- [ ] 点击"连接钱包"按钮
- [ ] MetaMask 弹窗正常显示
- [ ] 点击"连接"后成功连接
- [ ] 显示正确的钱包地址
- [ ] 显示正确的账户余额

### 2.2 网络切换
- [ ] 在 MetaMask 中切换到其他网络
- [ ] 应用提示切换回 Sepolia
- [ ] 点击切换按钮后成功切换
- [ ] 网络切换后应用正常工作

### 2.3 账户切换
- [ ] 在 MetaMask 中切换账户
- [ ] 应用自动检测账户变化
- [ ] 显示新账户的地址和余额
- [ ] 账户数据正确更新

### 2.4 断开连接
- [ ] 点击"断开连接"按钮
- [ ] 成功断开钱包连接
- [ ] 返回登录页面
- [ ] 可以重新连接

---

## 3️⃣ Living Portfolio 测试

### 3.1 创建作品集

#### 测试步骤
1. [ ] 导航到 Portfolio 页面
2. [ ] 点击"创建作品集"按钮
3. [ ] 填写以下信息:
   - 职位: "区块链开发工程师"
   - 简介: "5年 Web3 开发经验"
   - 技能: React, Solidity, Web3.js
   - 时薪: 0.01 ETH
4. [ ] 点击"创建作品集"
5. [ ] MetaMask 弹窗显示交易详情
6. [ ] 确认交易
7. [ ] 等待交易确认
8. [ ] 显示成功提示
9. [ ] 作品集信息正确显示

#### 验证点
- [ ] 交易成功上链
- [ ] Gas 费用合理 (< 0.01 ETH)
- [ ] 作品集数据正确显示
- [ ] 技能标签正确显示
- [ ] 时薪正确显示

### 3.2 添加项目

#### 测试步骤
1. [ ] 在 Portfolio 页面点击"添加项目"
2. [ ] 填写项目信息:
   - 标题: "DeFi 借贷协议"
   - 描述: "开发去中心化借贷平台"
   - 分类: "DeFi"
   - 技术栈: Solidity, Hardhat, React
   - 预计工时: 100
   - 状态: 进行中
   - 公开: 是
3. [ ] 点击"添加项目"
4. [ ] 确认交易
5. [ ] 等待交易确认
6. [ ] 项目卡片正确显示

#### 验证点
- [ ] 项目添加成功
- [ ] 项目信息正确显示
- [ ] 技术栈标签正确
- [ ] 状态和进度正确

### 3.3 更新可用性状态

#### 测试步骤
1. [ ] 点击"更新状态"按钮
2. [ ] 选择状态: "可用"
3. [ ] 设置可用时间: 周一至周五
4. [ ] 设置每周工时: 40 小时
5. [ ] 添加备注: "可以立即开始新项目"
6. [ ] 点击"更新状态"
7. [ ] 确认交易
8. [ ] 状态更新成功显示

#### 验证点
- [ ] 状态更新成功
- [ ] 可用性信息正确显示
- [ ] 备注正确显示

### 3.4 查看凭证

#### 测试步骤
1. [ ] 切换到"凭证"标签页
2. [ ] 查看凭证列表
3. [ ] 点击凭证卡片查看详情

#### 验证点
- [ ] 凭证列表正确显示
- [ ] 凭证信息完整
- [ ] IPFS 链接可访问(如果有)

---

## 4️⃣ Passive Discovery 测试

### 4.1 订阅用户

#### 测试步骤
1. [ ] 在匹配结果或作品集页面找到用户
2. [ ] 点击"订阅更新"按钮
3. [ ] 选择通知偏好:
   - ✅ 可用性变化
   - ✅ 新项目
   - ✅ 技能更新
4. [ ] 点击"确认订阅"
5. [ ] 确认交易
6. [ ] 订阅成功提示

#### 验证点
- [ ] 订阅成功
- [ ] 订阅状态正确显示
- [ ] 按钮变为"已订阅"

### 4.2 接收通知

#### 测试步骤
1. [ ] 使用另一个账户更新作品集
2. [ ] 切换回订阅账户
3. [ ] 点击顶部通知图标
4. [ ] 查看新通知

#### 验证点
- [ ] 通知正确显示
- [ ] 通知内容准确
- [ ] 未读计数正确
- [ ] 点击通知可标记为已读

### 4.3 管理订阅

#### 测试步骤
1. [ ] 导航到 Profile > 订阅管理
2. [ ] 查看"我的订阅"列表
3. [ ] 查看"订阅者"列表
4. [ ] 点击"取消订阅"
5. [ ] 确认取消
6. [ ] 订阅列表更新

#### 验证点
- [ ] 订阅列表正确显示
- [ ] 取消订阅成功
- [ ] 列表实时更新

---

## 5️⃣ Opportunity Matching 测试

### 5.1 创建匹配需求

#### 测试步骤
1. [ ] 导航到 Matching 页面
2. [ ] 点击"创建匹配需求"
3. [ ] 添加技能:
   - Solidity
   - React
   - Web3.js
4. [ ] 点击"开始匹配"
5. [ ] 等待匹配结果

#### 验证点
- [ ] 匹配结果正确显示
- [ ] 匹配分数合理 (0-100)
- [ ] 用户信息完整
- [ ] 排序正确(按分数降序)

### 5.2 查看匹配结果

#### 测试步骤
1. [ ] 查看匹配结果列表
2. [ ] 检查每个匹配用户的信息
3. [ ] 查看匹配分数
4. [ ] 点击用户卡片查看详情

#### 验证点
- [ ] 用户信息完整
- [ ] 匹配分数准确
- [ ] 技能标签匹配
- [ ] 可用性状态正确

### 5.3 联系匹配用户

#### 测试步骤
1. [ ] 点击"发送消息"按钮
2. [ ] 跳转到聊天页面
3. [ ] 发送测试消息
4. [ ] 消息发送成功

#### 验证点
- [ ] 跳转正确
- [ ] 消息发送成功
- [ ] 消息加密正确

---

## 6️⃣ Payment Escrow 测试

### 6.1 创建托管支付

#### 测试步骤
1. [ ] 导航到 Payments 页面
2. [ ] 点击"创建支付"
3. [ ] 填写支付信息:
   - 收款地址: [测试地址]
   - 金额: 0.001 ETH
   - 托管期限: 30 天
   - 说明: "测试支付"
4. [ ] 点击"创建托管"
5. [ ] 确认交易
6. [ ] 等待交易确认

#### 验证点
- [ ] 支付创建成功
- [ ] 资金已锁定在合约中
- [ ] 支付信息正确显示
- [ ] 交易哈希可查询

### 6.2 释放托管资金

#### 测试步骤
1. [ ] 在"发送的"标签页找到支付
2. [ ] 点击"释放资金"按钮
3. [ ] 确认操作
4. [ ] 确认交易
5. [ ] 等待交易确认

#### 验证点
- [ ] 资金释放成功
- [ ] 收款方收到资金
- [ ] 支付状态更新为"已完成"
- [ ] 余额正确更新

### 6.3 申请退款

#### 测试步骤
1. [ ] 创建新的托管支付
2. [ ] 等待超过托管期限(或使用测试账户)
3. [ ] 点击"申请退款"
4. [ ] 确认交易
5. [ ] 资金退回

#### 验证点
- [ ] 退款申请成功
- [ ] 资金退回到付款方
- [ ] 支付状态更新为"已退款"

### 6.4 提起争议

#### 测试步骤
1. [ ] 在支付列表中选择一笔支付
2. [ ] 点击"提起争议"
3. [ ] 输入争议原因
4. [ ] 提交争议
5. [ ] 确认交易

#### 验证点
- [ ] 争议提交成功
- [ ] 支付状态更新为"争议中"
- [ ] 争议信息正确记录

---

## 7️⃣ 加密功能测试

### 7.1 消息加密

#### 测试步骤
1. [ ] 打开浏览器控制台
2. [ ] 执行以下测试代码:

```javascript
// 导入加密函数
import { generateKeyPair, encryptMessage, decryptMessage } from './utils/encryption.js'

// 生成密钥对
const keyPair = await generateKeyPair()
console.log('公钥:', keyPair.publicKey.substring(0, 50) + '...')
console.log('私钥:', keyPair.privateKey.substring(0, 50) + '...')

// 加密消息
const message = "这是一条测试消息"
const encrypted = await encryptMessage(message, keyPair.publicKey)
console.log('加密后:', encrypted.substring(0, 50) + '...')

// 解密消息
const decrypted = await decryptMessage(encrypted, keyPair.privateKey)
console.log('解密后:', decrypted)
console.log('验证:', decrypted === message ? '✅ 成功' : '❌ 失败')
```

#### 验证点
- [ ] 密钥生成成功
- [ ] 消息加密成功
- [ ] 消息解密成功
- [ ] 解密后内容与原文一致

### 7.2 文件加密

#### 测试步骤
1. [ ] 在控制台执行:

```javascript
import { generateSymmetricKey, encryptWithSymmetricKey, decryptWithSymmetricKey } from './utils/encryption.js'

// 生成对称密钥
const key = await generateSymmetricKey()
console.log('对称密钥:', key.substring(0, 50) + '...')

// 加密数据
const data = "这是一些测试数据"
const result = await encryptWithSymmetricKey(data, key)
console.log('加密后:', result.encrypted.substring(0, 50) + '...')
console.log('IV:', result.iv)

// 解密数据
const decrypted = await decryptWithSymmetricKey(result.encrypted, key, result.iv)
console.log('解密后:', decrypted)
console.log('验证:', decrypted === data ? '✅ 成功' : '❌ 失败')
```

#### 验证点
- [ ] 对称密钥生成成功
- [ ] 数据加密成功
- [ ] 数据解密成功
- [ ] 解密后内容与原文一致

---

## 8️⃣ 性能测试

### 8.1 页面加载性能

#### 测试指标
- [ ] 首次内容绘制 (FCP) < 1.5s
- [ ] 最大内容绘制 (LCP) < 2.5s
- [ ] 首次输入延迟 (FID) < 100ms
- [ ] 累积布局偏移 (CLS) < 0.1

#### 测试工具
- Chrome DevTools > Lighthouse
- 运行性能审计
- 查看性能评分

### 8.2 交易性能

#### 测试步骤
1. [ ] 记录创建作品集的时间
2. [ ] 记录添加项目的时间
3. [ ] 记录创建支付的时间
4. [ ] 记录订阅用户的时间

#### 性能目标
- [ ] 交易准备时间 < 1s
- [ ] MetaMask 弹窗响应 < 0.5s
- [ ] 交易确认时间 < 30s (取决于网络)
- [ ] UI 更新时间 < 1s

---

## 9️⃣ 安全测试

### 9.1 XSS 防护

#### 测试步骤
1. [ ] 在输入框中输入: `<script>alert('XSS')</script>`
2. [ ] 提交表单
3. [ ] 检查是否执行脚本

#### 验证点
- [ ] 脚本未执行
- [ ] 内容被转义或过滤
- [ ] 无安全警告

### 9.2 私钥安全

#### 测试步骤
1. [ ] 打开浏览器控制台
2. [ ] 查看 localStorage
3. [ ] 查看 sessionStorage
4. [ ] 查看 cookies

#### 验证点
- [ ] 私钥未存储在 localStorage
- [ ] 私钥未存储在 sessionStorage
- [ ] 私钥未存储在 cookies
- [ ] 私钥仅在 MetaMask 中

### 9.3 交易安全

#### 测试步骤
1. [ ] 创建一笔交易
2. [ ] 在 MetaMask 中查看交易详情
3. [ ] 检查交易参数

#### 验证点
- [ ] 交易目标地址正确
- [ ] 交易金额正确
- [ ] Gas 费用合理
- [ ] 无可疑参数

---

## 🔟 兼容性测试

### 10.1 浏览器兼容性

#### Chrome
- [ ] 页面正常显示
- [ ] 功能正常工作
- [ ] MetaMask 正常连接

#### Firefox
- [ ] 页面正常显示
- [ ] 功能正常工作
- [ ] MetaMask 正常连接

#### Brave
- [ ] 页面正常显示
- [ ] 功能正常工作
- [ ] MetaMask 正常连接

#### Edge
- [ ] 页面正常显示
- [ ] 功能正常工作
- [ ] MetaMask 正常连接

### 10.2 设备兼容性

#### 桌面端
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux

#### 移动端
- [ ] iOS Safari
- [ ] Android Chrome
- [ ] 响应式布局正常

---

## 1️⃣1️⃣ 错误处理测试

### 11.1 网络错误

#### 测试步骤
1. [ ] 断开网络连接
2. [ ] 尝试执行操作
3. [ ] 检查错误提示

#### 验证点
- [ ] 显示友好的错误提示
- [ ] 提示用户检查网络
- [ ] 可以重试操作

### 11.2 交易失败

#### 测试步骤
1. [ ] 设置极低的 Gas 费用
2. [ ] 提交交易
3. [ ] 等待交易失败

#### 验证点
- [ ] 显示交易失败提示
- [ ] 说明失败原因
- [ ] 可以重新提交

### 11.3 余额不足

#### 测试步骤
1. [ ] 使用余额不足的账户
2. [ ] 尝试创建支付
3. [ ] 检查错误提示

#### 验证点
- [ ] 提示余额不足
- [ ] 显示当前余额
- [ ] 提供获取 ETH 的链接

---

## 📊 测试结果汇总

### 功能测试结果

| 功能模块 | 测试项 | 通过 | 失败 | 备注 |
|---------|-------|------|------|------|
| 基础功能 | 2 | [ ] | [ ] | |
| Web3 连接 | 4 | [ ] | [ ] | |
| Living Portfolio | 4 | [ ] | [ ] | |
| Passive Discovery | 3 | [ ] | [ ] | |
| Opportunity Matching | 3 | [ ] | [ ] | |
| Payment Escrow | 4 | [ ] | [ ] | |
| 加密功能 | 2 | [ ] | [ ] | |
| 性能测试 | 2 | [ ] | [ ] | |
| 安全测试 | 3 | [ ] | [ ] | |
| 兼容性测试 | 2 | [ ] | [ ] | |
| 错误处理 | 3 | [ ] | [ ] | |

### 总体评分

- **功能完整性**: ___/100
- **性能表现**: ___/100
- **安全性**: ___/100
- **用户体验**: ___/100
- **兼容性**: ___/100

**总分**: ___/100

---

## 🐛 已知问题

### 高优先级
1. [ ] 问题描述
   - 影响: 
   - 复现步骤:
   - 解决方案:

### 中优先级
1. [ ] 问题描述
   - 影响:
   - 复现步骤:
   - 解决方案:

### 低优先级
1. [ ] 问题描述
   - 影响:
   - 复现步骤:
   - 解决方案:

---

## 📝 测试建议

### 改进建议
1. 
2. 
3. 

### 优化建议
1. 
2. 
3. 

---

## ✅ 测试完成确认

- [ ] 所有功能测试已完成
- [ ] 所有性能测试已完成
- [ ] 所有安全测试已完成
- [ ] 所有兼容性测试已完成
- [ ] 测试报告已生成
- [ ] 问题已记录并分配
- [ ] 应用可以发布

**测试人员**: ___________  
**测试日期**: ___________  
**签名**: ___________

---

**测试文档版本**: v1.0  
**最后更新**: 2025-10-30
